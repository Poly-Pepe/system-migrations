pipeline {
    agent { label 'test-stand' }

    triggers { pollSCM('* * * * *') }
    options { timestamps() }

    stages {
        stage('Show Workspace') {
            steps {
                echo "Workspace directory: ${env.WORKSPACE}"
            }
        }

        stage('Generate Random Password') {
            steps {
                script {
                    def generateRandomPassword = { ->
                        def random = new Random()
                        
                        def passwordLength = random.nextInt(7) + 6
                        
                        def password = (1..passwordLength).collect { random.nextInt(10) }.join("")
                        
                        return password
                    }

                    env.RANDOM_PASSWORD = generateRandomPassword()
                }
            }
        }

        stage('Get password') {
            steps {
                echo "Generated password: ${env.RANDOM_PASSWORD}"
            }
        }
    }
}
